<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>如何使用PHPDoc寫註解? | 點燈坊</title>
  <meta name="author" content="真 OO無双">
  
  <meta name="description" content="使用PhpStorm支援的的PHPDoc寫註解">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
 <meta name="description" content="使用PhpStorm支援的的PHPDoc寫註解">
<meta property="og:type" content="article">
<meta property="og:title" content="如何使用PHPDoc寫註解?">
<meta property="og:url" content="http://oomusou.io/phpstorm/phpstorm-phpdoc/index.html">
<meta property="og:site_name" content="點燈坊">
<meta property="og:description" content="使用PhpStorm支援的的PHPDoc寫註解">
<meta property="og:image" content="http://oomusou.io/images/feature/logo.png">
<meta property="og:updated_time" content="2016-03-22T14:03:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="如何使用PHPDoc寫註解?">
<meta name="twitter:description" content="使用PhpStorm支援的的PHPDoc寫註解">
 

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
     <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		<li><a  href="/">點燈坊</a></li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class="fa fa-rss"></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 
	
		<div class="page-header">		
			<h1> 如何使用PHPDoc寫註解?</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

	
		 <div class="alert alert-success description">
			<i class="fa fa-info-circle"></i> 使用PhpStorm支援的的PHPDoc寫註解			
		</div> <!-- alert -->
		

	<!-- toc -->
	<div id="postTOC">
		<span class="tocHeading">Contents</span>
		<ol class="toc-article"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Version"><span class="toc-article-text">Version</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#為什麼要寫註解？"><span class="toc-article-text">為什麼要寫註解？</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#如何建立PHPDoc？"><span class="toc-article-text">如何建立PHPDoc？</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#檔頭註解"><span class="toc-article-text">檔頭註解</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@version"><span class="toc-article-text">@version</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@author"><span class="toc-article-text">@author</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@date"><span class="toc-article-text">@date</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@since"><span class="toc-article-text">@since</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Class註解"><span class="toc-article-text">Class註解</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@package"><span class="toc-article-text">@package</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@method"><span class="toc-article-text">@method</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@property"><span class="toc-article-text">@property</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Property註解"><span class="toc-article-text">Property註解</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@var"><span class="toc-article-text">@var</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Method註解"><span class="toc-article-text">Method註解</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@param"><span class="toc-article-text">@param</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@return"><span class="toc-article-text">@return</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@throws"><span class="toc-article-text">@throws</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@todo"><span class="toc-article-text">@todo</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@since-1"><span class="toc-article-text">@since</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@deprecated"><span class="toc-article-text">@deprecated</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Method內註解"><span class="toc-article-text">Method內註解</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@var-1"><span class="toc-article-text">@var</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#PHPUnit註解"><span class="toc-article-text">PHPUnit註解</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@test"><span class="toc-article-text">@test</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@group"><span class="toc-article-text">@group</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#@expectedException"><span class="toc-article-text">@expectedException</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Conclusion"><span class="toc-article-text">Conclusion</span></a></li></ol>
    </div>

	<!-- content -->
	<div class="mypage">		
	    <p>註解是一定要寫的，但要怎麼寫才能使<code>開發者</code>與<code>工具</code>都看得懂呢？PHPDoc是目前PHP註解的標準，提供了統一的註解寫法，並且獲得PhpStorm的支援，PHPUnit也使用PHPDoc，事實上Laravel的source code也是使用PHPDoc格式來寫註解。</p>
<a id="more"></a>
<h2 id="Version">Version</h2><hr>
<p>PhpStorm 10.0.1</p>
<h2 id="為什麼要寫註解？">為什麼要寫註解？</h2><hr>
<ol>
<li><p><strong><em>使用人話解釋</em></strong><br>使用<code>人話</code>描述<code>顯示邏輯</code>、<code>商業邏輯</code>與<code>資料庫邏輯</code>，避免日後<code>需求改變</code>須維護時，自己或其他人看不懂而無法維護。</p>
</li>
<li><p><strong><em>讓 IDE得知型別</em></strong><br>PHP是<code>弱型別語言</code>，可以使用<code>type hint</code>，也可使用<code>duck type</code>，當使用duck type時，只有在run time才能得知型別，IDE無法從design time得知型別，因此無法實現code complete與inspection，必須依賴PHPDoc描述型別，這也是PHP比其他語言都更<code>依賴</code>註解的原因。</p>
</li>
</ol>
<h2 id="如何建立PHPDoc？">如何建立PHPDoc？</h2><hr>
<ol>
<li><p>在PhpStorm輸入<code>/**</code>，然後按下&#8617;，PhpStorm會自動依據當時的游標的位置產生適當的PHPDoc blocks。</p>
</li>
<li><p><strong><em>Code-&gt;Generate</em></strong>或按&#8984; + N，會產生<code>Generate</code>選單，選擇<code>PHPDoc Blocks</code>。<br><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc000.png" alt=""></p>
</li>
<li><p>在<code>適當時機</code>按下&#8997; + &#8617;，會出現<code>Generate PHPDoc for ...</code>。如剛建立完class, property或method時。<br><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc001.png" alt=""></p>
</li>
</ol>
<h2 id="檔頭註解">檔頭註解</h2><hr>
<p>使用&#8984; + N建立<code>PHP Class</code>時，PhpStorm預設會在檔頭插入<code>檔頭註解</code>。<span class="margin-note-marker"><sup>1</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">1</span>PhpStorm預設的檔頭註解並非如此，詳細請參考<a href="/phpstorm/phpstorm-file-header">如何修改PhpStorm的檔頭註解？</a></span></span></span><br><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc002.png" alt=""></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Post model的repository</span><br></pre></td></tr></table></figure>
<p>第1行使用<code>中文</code>敘述整個檔案(整個class)的功能。<span class="margin-note-marker"><sup>2</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">2</span>不建議使用<code>英文</code>寫註解，因為註解主要是給人看的，<code>易懂</code>是其目的，因為每個人對英文的理解程度不一樣，若因此而造成對註解的<code>誤解</code>，就失去寫註解的意義了。</span></span></span></p>
<p>之後會空一行。</p>
<h3 id="@version">@version</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@version <span class="number">0.1</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>
<p>目前程式的版本，一開始為0.1.0。建議採用<code>Major.Minor.Patch</code>的版本命名方式，也就是<code>Breaks.Features.Fixes</code>。<span class="margin-note-marker"><sup>3</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">3</span>詳細請參考<a href="http://semver.org" target="_blank" rel="external">Sematic Versioning</a></span></span></span></p>
<h3 id="@author">@author</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@author oomusou oomusou@gmail.com</span><br></pre></td></tr></table></figure>
<p>程式一開始建立的<code>原作者</code>。第1個參數為姓名，第2個參數為email。</p>
<h3 id="@date">@date</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@date <span class="number">11</span>/<span class="number">22</span>/<span class="number">15</span></span><br></pre></td></tr></table></figure>
<p>程式一開始建立的<code>日期</code>。</p>
<h3 id="@since">@since</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@since <span class="number">0.1</span><span class="number">.0</span> <span class="number">11</span>/<span class="number">22</span>/<span class="number">15</span> oomusou: 新增getLatest3Posts()</span><br></pre></td></tr></table></figure>
<p>程式的改版紀錄。第1個參數為<code>版本號</code>，第2個參數為<code>修改日期</code>，第3個參數為<code>修改者名稱</code>，後見加上<code>:</code>，再加上<code>簡易註解</code>。</p>
<p>若有很多版本，就繼續加上多個<code>@since</code>。</p>
<h2 id="Class註解">Class註解</h2><hr>
<p>使用&#8984; + N建立<code>PHP Class</code>時，PhpStorm自動會在class之前插入class註解。<span class="margin-note-marker"><sup>4</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">4</span>interface與trait註解寫法比照class。</span></span></span><br><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc003.png" alt=""></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">Class</span> <span class="title">PostRepository</span></span></span><br></pre></td></tr></table></figure>
<p>第1行PhpStorm預設使用<code>Class</code>加上<code>class名稱</code>當註解，由於<code>one class per file</code>原則，所以class的註解就相當於檔案的註解，因此不用再特別敘述。</p>
<p>之後會空一行。</p>
<h3 id="@package">@package</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@package App\Repositories</span><br></pre></td></tr></table></figure>
<p>描述class所屬的namespace，PhpStorm會自動建立。<span class="margin-note-marker"><sup>5</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">5</span>建議每個class都要依據<code>PSR-4</code>的建議使用namespace，詳細請參考<a href="/php/php-namespace/">如何使用Namespace？</a></span></span></span></p>
<h3 id="@method">@method</h3><figure class="highlight php"><figcaption><span>_my_ide_helper.php</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Illuminate</span>\<span class="title">Support</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * <span class="doctag">@method</span> Fluent first()</span><br><span class="line"> * <span class="doctag">@method</span> Fluent after($column)</span><br><span class="line"> * <span class="doctag">@method</span> Fluent change()</span><br><span class="line"> * <span class="doctag">@method</span> Fluent nullable()</span><br><span class="line"> * <span class="doctag">@method</span> Fluent unsigned()</span><br><span class="line"> * <span class="doctag">@method</span> Fluent unique()</span><br><span class="line"> * <span class="doctag">@method</span> Fluent index()</span><br><span class="line"> * <span class="doctag">@method</span> Fluent primary()</span><br><span class="line"> * <span class="doctag">@method</span> Fluent default($value)</span><br><span class="line"> * <span class="doctag">@method</span> Fluent onUpdate($value)</span><br><span class="line"> * <span class="doctag">@method</span> Fluent onDelete($value)</span><br><span class="line"> * <span class="doctag">@method</span> Fluent references($value)</span><br><span class="line"> * <span class="doctag">@method</span> Fluent on($value)</span><br><span class="line"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fluent</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure> 
<p>平常不會使用，除非使用<code>__call()</code>或<code>__callStatic()</code> <code>動態產生</code>method，由於這種寫法PhpStorm的auto complete抓不到，因次要使用PHPDoc特別描述。<span class="margin-note-marker"><sup>6</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">6</span>在Laravel最典型就是schema builder的<code>unique()</code>與<code>nullable()</code>，在<code>Fluent</code> class內是由<code>__call()</code>動態產生，需另外使用PHPDoc的<code>@method</code>加以描述，PhpStorm才可以抓的到。</span></span></span></p>
<h3 id="@property">@property</h3><figure class="highlight php"><figcaption><span>app/Company.php</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Company</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@property</span> integer $id</span><br><span class="line"> * <span class="doctag">@property</span> string $name</span><br><span class="line"> * <span class="doctag">@property</span> string $pairing_code</span><br><span class="line"> * <span class="doctag">@property</span> integer $nation_region_id</span><br><span class="line"> * (略)</span><br><span class="line">*/</span></span><br></pre></td></tr></table></figure> 
<p>平常不會使用，除非使用<code>__get()</code>與<code>__set()</code> <code>動態產生</code> property，由於這種寫法PhpStorm的auto complete抓不到，因此要使用PHPDoc特別描述。<span class="margin-note-marker"><sup>7</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">7</span>在Laravel最典型的就是model的欄位，是使用<code>__get()</code>與<code>__set()</code>動態產生property，需使用<a href="https://github.com/barryvdh/laravel-ide-helper" target="_blank" rel="external">IDE Helper</a>產生<code>_ide_helper.php</code>，裡面就是用<code>@property</code>描述，PhpStorm才可以抓的到model的欄位。</span></span></span></p>
<h2 id="Property註解">Property註解</h2><hr>
<p>當建立property時，在property上方輸入<code>/**</code> + &#8617;，PhpStorm會自動產生property的註解。<br><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc004.png" alt=""></p>
<h3 id="@var">@var</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">var</span> Post 注入的post model</span><br></pre></td></tr></table></figure>
<p>對每個property做註解。</p>
<p>第1個參數為property的型別，由於PHP允許duck type，這會導致PhpStorm的auto complete無法執行，所以一定要要輸入型別。</p>
<p>第2個參數為property的註解，使用<code>中文</code>描述該property的意義。</p>
<h2 id="Method註解">Method註解</h2><hr>
<ol>
<li><p>當使用<code>pubf</code>自行建立method時，在method名稱後面按 &#8997; + &#8617;，PhpStorm會自動根據參數建立method的PHPDoc blocks。</p>
</li>
<li><p>當使用&#8963; + I實踐interface的method時，只要interface有寫好註解，只要在<strong><em>Add PHPDoc</em></strong>選擇<code>Copy from base class</code>，就可以將interface所寫好的註解複製過來。</p>
</li>
</ol>
<p><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc005.png" alt=""></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">回傳最新<span class="number">3</span>筆文章</span><br></pre></td></tr></table></figure>
<p>第1行使用<code>中文</code>敘述整個method的功能。<span class="margin-note-marker"><sup>8</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">8</span>interface與trait內的method註解寫法，比照class的method。</span></span></span></p>
<p>之後會空一行。</p>
<h3 id="@param">@param</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@param string <span class="variable">$field</span> 排序欄位</span><br></pre></td></tr></table></figure>
<p>對method的每個參數做註解。</p>
<p>第1個參數為<code>傳入參數</code>的型別。<br>第2個參數為<code>傳入參數</code>的變數。<br>第3個參數為<code>傳入參數</code>的敘述。</p>
<h3 id="@return">@return</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">return</span> Collection 最新<span class="number">3</span>筆文章</span><br></pre></td></tr></table></figure>
<p>對method的回傳值做註解。</p>
<p>第1個參數為回傳值的型別。<br>第2個參數為回傳值的敘述。</p>
<div class="alert alert-info"><i class="fa fa-info"></i>  為什麼@param與@return對PhpStorm的Auto Complete與Inspection這麼重要？。</div>
<p>由於PHP允許duck type，因此method的參數可以不寫型別，但這樣使得PhpStorm無法在design time得知該參數的型別，因此auto complete與inspection無法執行，所以建議在PHPDoc block一定要加上<code>@param</code>描述參數型別，<code>@return</code>描述回傳型別。此外，若參數為<code>物件</code>，也建議加上class或interface的type hint，一來PhpStorm的auto complete與inspection可以抓到，二來在unit test時，可以使用service container的dependency injection，詳細請參考<a href="/2015/11/14/tdd-isolated-test/">如何測試內含相依物件的函式？</a>。</p>
<h3 id="@throws">@throws</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@throws InvalidArgumentException 若提供的參數不是<span class="keyword">array</span>型別</span><br></pre></td></tr></table></figure>
<p>若method有使用exception，可使用<code>@throws</code>描述。</p>
<p>第1個參數為exception的型別。<br>第2個參數為該exception的敘述。</p>
<h3 id="@todo">@todo</h3><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@todo</span> 此段程式碼尚未重構，建議有時間時加以重構</span><br></pre></td></tr></table></figure>
<p>若method尚有功能未完成，可寫在<code>@todo</code>裡。</p>
<h3 id="@since-1">@since</h3><p>若之後該method因bug或需求變更而需要維護，使用<code>@since</code>描述其變更，與擋頭註解的<code>@since</code>寫法一樣。</p>
<h3 id="@deprecated">@deprecated</h3><p>若該API或public method即將在未來版本停用，可加上<code>@depricated</code>，後面加上註解，PhpStorm對於<code>@depricated</code>有特別的支援。</p>
<p><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc008.png" alt=""></p>
<p>只要使用該API的method，都會加上<code>刪除線</code>提醒。</p>
<p><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc009.png" alt=""></p>
<h2 id="Method內註解">Method內註解</h2><hr>
<p>當PhpStorm無法得知該變數的型別，而導致auto complete與inspection無法執行時，就必須自行使用<code>@var</code>去描述該變數的型別。<br><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc006.png" alt=""></p>
<h3 id="@var-1">@var</h3><p>最典型的用法是Laravel的Eloquent傳回一個物件，但我們知道他本質上是某個型別的model，但PhpStorm並不知道，因此我們必須自行使用<code>@var</code>加以描述。</p>
<h2 id="PHPUnit註解">PHPUnit註解</h2><hr>
<p>PHPUnit也對PHPDoc做了一些擴充，在此僅對最常用的tag加以介紹。<br><img src="/images/phpstorm/phpstorm-phpdoc/phpdoc007.png" alt=""></p>
<h3 id="@test">@test</h3><p>PHPUnit預設會以<code>test</code>開頭的method視為test method，若你不想遵循這個規則，則在method的註解加上<code>@test</code>也可以。</p>
<h3 id="@group">@group</h3><p>你可以將test method加以分組，將來PHPUnit只測試該group即可。<span class="margin-note-marker"><sup>9</sup></span> <span class="block margin-div-outer"><span class="block margin-div-inner"><span class="block margin-note"><span class="margin-note-marker">9</span>若使用PhpStorm執行PHPUnit，按&#8963; + &#8679; + R可對單一method做測試，詳細請參考<a href="/phpstorm/phpstorm-debug-testing/">如何使用PhpStorm測試與除錯？</a></span></span></span><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oomusou@mac:~/MyProject$ php vendor/bin/phpunit --group=PostRepository0</span><br></pre></td></tr></table></figure></p>
<h3 id="@expectedException">@expectedException</h3><p>若你要測試的就是該method產生exception，PHPUnit並沒有提供對應的assertion，須在test method的註解的方式加上<code>@expectedException</code>，後面加上預期的exception類別。</p>
<h2 id="Conclusion">Conclusion</h2><hr>
<ul>
<li>建議使用<code>中文</code>寫註解，避免因為每個人對於英文的理解不一樣，而造成誤解。</li>
<li>其他程式語言沒有依照一定的格式寫註解，或許問題沒那麼大，但因為PHP為<code>弱型別</code>語言，為了讓IDE能支援auto complete與inspection，使用標準的PHPDoc格式非常重要。</li>
<li>PHPDoc不僅僅只有在PhpStorm可用，其他如Sublime Text，Eclipse與Netbeans也都支援PHPDoc。</li>
</ul>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/phpstorm/phpstorm-file-header/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/tags"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/mamp/mamp-setup/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
	
	</div> <!-- col-md-9/col-md-12 -->
	
	
		<div class="col-md-3"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2015-11-20 
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/PHPDoc/">PHPDoc<span>3</span></a></li> <li><a href="/tags/PhpStorm/">PhpStorm<span>31</span></a></li>
    </ul>
	</div>
		

    <hr>
	
</div><!-- col-md-3 -->

	

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer>  </footer>
</div> <!-- container-narrow -->
  
  <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'hAXbiVYFC92XF16_EhCh','2.0.0');
  </script>



  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
   </html>
